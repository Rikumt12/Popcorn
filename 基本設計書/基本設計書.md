# ECサイト 基本設計書 

 

| ドキュメントバージョン | 1.0 | 

|---|---| 

| 作成日 | 2025年6月30日 | 

| 作成チーム | ECサイト開発チーム | 

| 承認者 | 株式会社〇〇 プロジェクト責任者 | 

| 更新履歴 | 2025/07/01: 初版作成 | 
 

## 1. はじめに 

### 1.1 本書の目的 

本書は、株式会社〇〇のECサイト新規構築プロジェクトにおける基本設計の内容を定義するものである。要件定義書で定められた要件に基づき、システムの全体構成、主要な機能、画面、データ、非機能要件への対応方針などを明確にし、後続の詳細設計、実装、テスト工程のインプットとすることを目的とする。 

 

### 1.2 プロジェクト概要 

より多くの顧客に商品を届けるため、新たにECサイトを構築し、販路の拡大とブランドの価値向上を目指す。本プロジェクトはその第一歩として、基本機能を備えたECサイトを短期間で立ち上げるものである。 

 

### 1.3 前提知識 

 

## 2. システム概要 

### 2.1 システム目的 

 

### 2.2 対象ユーザー 

- 管理者：商品登録・更新、受注管理、出荷処理、売上管理、サイト設定等を行う。主にクライアント企業の担当者が想定される。 

- 一般利用者：オンライン販売サイトを通じて商品検索・閲覧・購入を行うエンドユーザー。 

 

### 2.3 システム構成図 

システム全体のハードウェア、ソフトウェア、ネットワーク構成。 

 

### 2.4 外部インターフェース概要 

外部システムとの連携方式やデータの概要。 

 

## 3. 機能設計 

### 3.1 機能一覧  
- 商品閲覧機能(商品一覧表示・商品詳細表示・カテゴリ検索）
- カート機能（商品追加削除・数量変更・カート内容表示）
- 注文処理機能（注文情報入力・注文内容確認・注文確定）
- 管理機能（商品登録・編集・受注管理・出荷処理・カテゴリ管理）
### 3.2 機能構成図 

```mermaid
graph TD
    A[ECサイトシステム] --> B(商品閲覧機能)
    A --> C(カート機能)
    A --> D(注文処理機能)
    A --> E(管理機能)

    subgraph B[商品閲覧機能]
        B1[商品一覧表示]
        B2[商品詳細表示]
        B3[カテゴリ検索]
    end

    subgraph C[カート機能]
        C1[商品追加]
        C2[数量変更]
        C3[商品削除]
        C4[カート内容表示]
    end

    subgraph D[注文処理機能]
        D1[注文情報入力（氏名・住所・連絡先）]
        D2[注文内容確認]
        D3[注文確定]
    end

    subgraph E[管理機能]
        E1[商品登録・編集・削除]
        E2[受注管理]
        E3[出荷処理]
        E4[カテゴリ管理]
    end

    E1 --> B1
    D3 --> E2
    E4 --> B3

    style A fill:#f9f,stroke:#333,stroke-width:2px
```

### 3.3 主要機能フロー 

特に重要な機能について、処理の流れを示した図や説明（例: 注文処理フロー）。 

 

## 4. 画面設計 

### 4.1 画面一覧 

 

### 4.2 画面遷移図 

画面間の遷移の流れを示した図。 

```mermaid
graph TD 
    A[EC1101:トップページ] -- ログインする --> B(EC1301:ログイン画面); 
    B -- ログイン成功 --> C(EC1302:マイページ); 
    C -- 編集 --> C; 
    A -- 商品一覧ボタン --> D(EC1102: 商品一覧画面); 
    D -- 商品クリック --> E(EC1103: 商品詳細画面); 
    E -- カートに入れる --> F[EC1201:カート画面]; 
    F -- 購入する --> G[EC1202: 個人情報入力画面]; 
    G -- 入力完了 --> H[EC1203: 購入確認画面]; 
    H -- 確認完了 --> I[EC1203: 購入完了画面]; 
    E -- 備品一覧へ --> B; 
    B --トップページへ --> A; 
    C -- トップページへ --> A; 
    D -- トップページへ --> A; 
    E -- トップページへ --> A; 
    F --トップページへ --> A; 
    G -- トップページへ --> A; 
    H -- トップページへ --> A; 
    I -- トップページへ --> A;
    A --カートへ --> F;
    F --他の商品を探す --> D;
    D --ログインする --> B;
    E --ログインする --> B;
    F --ログインする --> B;
    G --ログインする --> B;
    D --一覧へ戻る --> E;
    C --ログアウト --> B;
    style A fill:#f9f,stroke:#333,stroke-width:1px 
    style B fill:#ccffcc,stroke:#333,stroke-width:1px 
    style C fill:#ccffcc,stroke:#333,stroke-width:1px 
    style D fill:#ccf,stroke:#333,stroke-width:1px 
    style E fill:#ccf,stroke:#333,stroke-width:1px,color:#000 
    style F fill:#ffebcc,stroke:#333,stroke-width:1px,color:#000 
    style G fill:#ffebcc,stroke:#333,stroke-width:1px,color:#000 
    style H fill:#ffebcc,stroke:#333,stroke-width:1px,color:#000 
    style I fill:#ffebcc,stroke:#333,stroke-width:1px,color:#000 
``` 

```mermaid
graph TD 
    A[ EC2001: 管理者向けトップページ] -- ログイン成功 --> B(EC2002: 商品管理画面); 
    B -- 備品選択 --> C(EC2003: 商品登録・編集画面); 
    B -- 入出庫ボタン --> D(EC2004: 受注管理画面); 
    A -- 管理者メニュー --> E(EC2005: ユーザ管理画面); 
    A -- ユーザー管理 --> F[EC2006: サイト設定画面]; 
    B -- ログアウト --> A; 
    C -- ログアウト --> A; 
    D -- ログアウト --> A; 
    E -- ログアウト --> A; 
    F -- ログアウト --> A; 
    style A fill:#f9f,stroke:#333,stroke-width:1px 
    style B fill:#ccf,stroke:#333,stroke-width:1px 
    style C fill:#ccf,stroke:#333,stroke-width:1px 
    style D fill:#ccf,stroke:#333,stroke-width:1px 
    style E fill:#ffebcc,stroke:#333,stroke-width:1px,color:#000 
    style F fill:#ffebcc,stroke:#333,stroke-width:1px,color:#000 
```

 

### 4.3 UI/UX基本方針 

画面設計における基本的な考え方、デザイン原則など。 

 

### 4.4 主要画面のワイヤーフレーム（必要に応じて） 

- 商品一覧画面ワイヤーフレーム 

- 受注・出荷管理画面ワイヤーフレーム 

 

### 4.5. 主要画面項目定義（例：商品一覧画面） 

 

## 5. データ設計 

### 5.1 概念データモデル（ER図） 

```mermaid

erDiagram
    CUSTOMERS ||--o{ ORDERS : "places"
    CUSTOMERS }o--|| ROLES : "has"
    PRODUCTS }o--|| CATEGORIES : "belongs to"
    ORDERS ||--o{ ORDER_ITEMS : "includes"
    PRODUCTS ||--o{ ORDER_ITEMS : "ordered in"

    CUSTOMERS {
        string customer_id PK "顧客ID"
        string name "氏名"
        string email "メールアドレス"
        string password "パスワード（ハッシュ化）"
        int role_id FK "ロールID (1:一般ユーザー)"
        datetime created_at "登録日時"
        datetime updated_at "更新日時"
    }
    ROLES {
        int role_id PK "ロールID (1:管理者, 2:一般ユーザー)"
        string role_name "ロール名"
    }
    PRODUCTS {
        string product_id PK "商品ID"
        string name "商品名"
        string description "商品説明"
        string image_url "商品画像URL"
        int category_id FK "カテゴリID"
        decimal price "価格"
        boolean active_flag "有効フラグ（true:有効、false:論理削除）"
        datetime created_at "登録日時"
        datetime updated_at "更新日時"
    }
    CATEGORIES {
        int category_id PK "カテゴリID"
        string category_name "カテゴリ名"
    }
    ORDERS {
        string order_id PK "注文ID"
        string customer_id FK "顧客ID"
        string payment_method "支払方法（銀行振込／代金引換）"
        string shipping_address "配送先住所"
        string order_status "注文ステータス（例：受付済、発送済）"
        datetime order_date "注文日時"
    }
    ORDER_ITEMS {
        int order_item_id PK "注文商品ID"
        string order_id FK "注文ID"
        string product_id FK "商品ID"
        int quantity "数量"
        decimal price "注文時の単価"
    }
```
### 5.2 主要テーブル概要 

CUSTOMERS（顧客テーブル） 

一般ユーザー用ECサイトの利用者情報を保持。 

会員登録が任意のため、パスワードをNULL許容する設計も検討可能。 

ロールによってゲスト／会員を分類。 

CUSTOMER_ROLES（顧客ロールマスタ） 

ゲスト、会員などの区分を管理するマスタテーブル。 

PRODUCTS（商品マスタ） 

ECサイト上で販売する商品情報を保持。 

管理画面経由で管理者が登録・更新。 

カテゴリ情報と紐付け、表示用の画像URLも保持。 

CATEGORIES（カテゴリマスタ） 

商品を分類するカテゴリ（キッチン用品、文房具など）を保持。 

カテゴリ別に商品を表示する際に使用。 

ORDERS（注文テーブル） 

顧客の注文情報を保持。 

支払い方法（銀行振込、代引き）、注文ステータスなども保持。 

ORDER_ITEMS（注文商品テーブル） 

注文ごとの購入商品を明細単位で保持。 

商品ごとの単価、数量を記録。 

ADMIN_USERS（管理者ユーザテーブル） 

管理者サイト専用のログインユーザー情報を保持。 

一般ユーザーとは完全に別テーブルで管理。 

商品登録や注文管理等を担当。 

 
 

### 5.3 データフロー概要 

- 登録済ユーザー
```mermaid
sequenceDiagram
    participant User as ユーザー（会員）
    participant UI as Web画面
    participant Backend as アプリケーション
    participant DB as データベース

    User->>UI: ログイン
    UI->>Backend: 認証情報を送信
    Backend->>DB: 会員情報を確認（user_id取得）
    DB-->>Backend: 認証OK（user_idを返す）
    Backend-->>UI: ログイン成功、トップページ表示

    User->>UI: 商品詳細ページを開く（SC0103）
    UI-->>User: 商品情報を表示

    User->>UI: 「カートに追加」クリック
    UI->>Backend: カートに商品追加（user_id付き）
    Backend-->>UI: カート追加成功

    User->>UI: カート画面へ遷移（SC0201）
    UI-->>User: カート内商品を表示

    User->>UI: 「注文手続きへ」クリック
    UI->>Backend: 注文画面表示要求（user_id付き）

    Backend->>DB: user_id から住所・氏名・メールを取得
    DB-->>Backend: 登録済み会員情報を返す
    Backend-->>UI: 会員情報付きの注文確認画面を表示
    UI-->>User: 入力不要で確認のみの画面表示

    User->>UI: 内容確認して「注文確定」

    UI->>Backend: 注文確定を送信（user_idあり）
    Backend->>DB: ORDERS テーブルに注文登録（user_idあり）
    Backend->>DB: ORDER_ITEMS テーブルに商品明細を登録
    Backend->>DB: PAYMENTS テーブルに「未入金」レコードを登録
    DB-->>Backend: 登録完了

    Backend->>UI: 注文完了画面（注文番号・振込先）を生成
    UI-->>User: 注文完了メッセージを表示

    Note over DB: 会員は後で<br>「注文履歴」画面から内容確認可能
```


&nbsp;
- 非登録ユーザー
```mermaid
sequenceDiagram
    participant User as ユーザー（非会員）
    participant UI as Web画面
    participant Backend as アプリケーション
    participant DB as データベース

    User->>UI: 商品詳細ページを開く（SC0103）
    UI-->>User: 商品情報を表示

    User->>UI: 「カートに追加」クリック
    UI->>Backend: カートに商品追加
    Backend-->>UI: カート追加成功

    User->>UI: カート画面へ遷移（SC0201）
    UI-->>User: カート内商品を表示

    User->>UI: 「注文手続きへ」クリック
    UI-->>User: 注文入力画面表示（SC0202）

    User->>UI: 氏名・メール・住所・支払方法を入力し「注文確定」

    UI->>Backend: 入力内容を送信
    Backend->>DB: ORDERS テーブルに注文登録（user_id = NULL）
    Backend->>DB: ORDER_ITEMS テーブルに商品明細を登録
    Backend->>DB: PAYMENTS テーブルに「未入金」レコードを登録
    DB-->>Backend: 登録完了

    Backend->>UI: 注文完了画面（注文番号・振込先）を生成
    UI-->>User: 注文完了メッセージを表示
```
 

## 6. 非機能要件の対応方針 

- 性能：目標性能値と、それを実現するためのアーキテクチャ上の方針（負荷分散、キャッシュなど）。 

- セキュリティ：セキュリティ要件と、それに対する具体的な対策方針（認証方式、暗号化方針、アクセス制御など）。 

- 可用性：可用性目標と、それを実現するための方針（冗長構成、バックアップ方針など）。 

- その他（保守性、運用性、拡張性など） 

 

## 7. 運用・保守設計の概要 

### 7.1 ログ設計方針 

どのようなログを、どのように出力・管理するか。 

 

### 7.2 監視設計方針 

システムの稼働状況をどのように監視するか。 

 

### 7.3 バックアップ・リカバリ方針 

データのバックアップと復旧に関する方針。 

 

## 8. 制約事項・前提条件 

### 8.1 使用技術スタック 

プログラミング言語、フレームワーク、データベース、ライブラリなど、開発に使用する技術とそのバージョン。 

 

### 8.2 インフラ環境 

利用するクラウドサービスやOSなどの前提条件。 

 

### 8.3 開発・運用ルール 

コーディング規約、バージョン管理ルールなど、プロジェクト固有のルール。 

 

### 8.4 スコープ外 

今回の開発範囲に含まれない事項。 

 

### 8.5 その他前提条件 

 

## 9. 用語集・略語リスト 

- ECサイト：Electronic Commerce Siteの略。Web上で商品を販売するサイト 

- カート機能：ユーザーが購入したい商品を一時的に保管する仮想的な買い物かご機能 

- 決済機能：オンラインでのクレジットカード決済等を処理する機能 

 